### AI驱动的赌场Roguelike卡牌游戏 - 核心架构文档 v1.0

#### 1.0 核心理念 (Core Philosophy)

本框架旨在打造一个以经典赌场游戏（如德州扑克、斗地主、21点等）为核心、以《杀戮尖塔》式的Roguelike为成长驱动的单人卡牌游戏体验。玩家将扮演一名挑战者，在一个分为多层的赌场中，通过在各种牌桌上战胜由AI扮演的、风格各异的对手，最终登上赌场的顶峰。

AI在本框架中扮演着**“游戏主持人”（Game Master）**与**“对手”（Opponent）**的双重角色，全权负责执行游戏规则、更新游戏状态、并根据其独特的“个性”与玩家进行博弈。游戏的核心是**轻数值，重博弈**，胜负取决于牌桌策略而非生命值计算。

#### 2.0 游戏循环 (The Game Loop)

1.  **开始挑战 (Start a Run)**：玩家以3点生命值开始一轮全新的赌场挑战。
2.  **地图导航 (Map Navigation)**：游戏生成一个分为三层的树状分支地图，玩家选择路线前进。
3.  **遭遇对手 (Encounter an Opponent)**：地图上的每个节点代表一个事件，通常是一个需要挑战的AI对手。
4.  **进行牌局 (Play the Game)**：根据AI对手的**【擅长游戏类型】**，与玩家进行一场牌局。
5.  **结算与奖励 (Resolution & Rewards)**：
    *   **胜利**：玩家赢得牌局，获得奖励（新的“道具”、一张“特殊卡牌”、游戏货币等），继续前进。
    *   **失败**：玩家输掉牌局，**失去1点生命值**。生命值归零则本轮挑战结束。
6.  **挑战Boss (Challenge the Boss)**：在每一层的终点，玩家需要挑战一个拥有强大**【能力】**的Boss级对手。
7.  **进入下一层 (Ascend)**：战胜Boss后，玩家进入赌场的下一层，面对更强的对手。

#### 3.0 核心机制详解 (Core Mechanics in Detail)

**3.1 地图系统 (The Map System)**

*   **结构**: 程序化生成的三层树状结构。
*   **节点类型**:
    *   **普通对手**: 标准的牌局挑战。
    *   **精英对手**: 拥有独特**【能力】**的强大对手，奖励更丰厚。
    *   **商店**: 购买新的“道具”或“特殊卡牌”。
    *   **休息处/事件**: 恢复生命值或遭遇叙事事件。
    *   **Boss**: 每层终点的最终挑战。

**3.2 玩家系统 (The Player System)**

*   **生命值 (Lives)**：核心资源，共3点。任何牌局的失败都会导致失去1点。
*   **牌库 (Deck)**：
    *   **基础牌**: 标准的52张扑克牌（或根据游戏类型变化）。
    *   **特殊卡牌 (Special Cards)**：通过奖励获得，拥有超越普通扑克牌规则的强大效果（如：[万能牌], [重塑], [洞察]）。
*   **道具 (Items)**：相当于《杀戮尖塔》中的“遗物”，提供永久的被动效果，是构筑策略的核心（如：[老手墨镜] - 免除小盲注，[幸运硬币] - 开局几率多抽一张牌）。

**3.3 对手系统 (The Opponent System)**

AI对手的数据结构将极为精简，完全围绕其在牌桌上的行为模式来定义。

*   **核心属性**:
    1.  **【擅长游戏类型 (Preferred Game)】**: 定义了在该节点上与玩家进行的游戏（德州扑克、斗地主、21点、比大小等）。
    2.  **【游戏风格 (Play Style)】**: AI决策的核心逻辑依据（谨慎型、激进型、计算型、直觉型）。
    3.  **【能力 (Ability)】**: 通常只有精英和Boss拥有，是能够打破常规游戏规则的特殊技能（如：[读心者] - 强制亮出玩家手牌，[强制交易] - 交换手牌，[道具干扰] - 使玩家道具失效）。

#### 4.0 AI 作为裁判与叙事者 (AI as Referee & Narrator)

*   **规则执行**: AI负责所有游戏规则的判定，如发牌、洗牌、判断牌型大小、计算筹码等。
*   **状态更新**: AI的每一个动作都将以标准指令的格式输出，用于更新世界书中的游戏状态JSON。
*   **叙事生成**: AI会在关键操作前后生成叙事性文本，描绘赌场环境、对手的微表情、言语挑衅等，增强游戏的沉浸感。