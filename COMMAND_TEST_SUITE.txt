# SillyPoker - æŒ‡ä»¤å…¨é¢æµ‹è¯•å¥—ä»¶ (Command Test Suite) v1.0
# ä½¿ç”¨æ–¹æ³•: å°†ä»»ä½•ä¸€ä¸ªæŒ‡ä»¤å—å¤åˆ¶å¹¶ç²˜è´´åˆ°èŠå¤©æ¡†ä¸­å‘é€ï¼Œä»¥æµ‹è¯•æ’ä»¶çš„å“åº”ã€‚
# ç›‘æ§æµè§ˆå™¨çš„å¼€å‘è€…æ§åˆ¶å°ï¼ˆF12 -> Consoleï¼‰ä»¥æŸ¥çœ‹è¯¦ç»†çš„ [SillyPoker] æ—¥å¿—è¾“å‡ºã€‚

# ===============================================
# 1. æ¸¸æˆåˆå§‹åŒ–ä¸è®¾ç½® (Game Initialization & Setup)
# ===============================================

# --- æµ‹è¯• 1.1: æ ‡å‡†å¾·å·æ‰‘å…‹å¼€å§‹ ---
# é¢„æœŸ: åˆå§‹åŒ–ä¸€åœº2äººå¾·å·æ‰‘å…‹ï¼Œæ•Œäººæ•°æ®è¢«è®¾ç½®ï¼Œå¹¶åˆ›å»ºä¸€å‰¯æ ‡å‡†52å¼ ç‰Œå †ã€‚
<command>
[Game:Start, data:{"game_type": "TexasHoldem", "players": ["{{user}}", "æ‹¦è·¯åŠ«åŒª"], "initial_state": { "name": "æ‹¦è·¯åŠ«åŒª", "play_style": "Aggressive", "chips": 800, "hand": [] }}]
</command>


# --- æµ‹è¯• 1.2: è‡ªå®šä¹‰ç‰Œå † (å››äººæ–—åœ°ä¸») ---
# é¢„æœŸ: æ­£ç¡®è®¾ç½®ä¸€ä¸ªåŒ…å«ä¸¤å‰¯ç‰Œå’Œå››å¼ ç‹ç‰Œçš„ç‰Œå †ã€‚å¿…é¡»åœ¨ Game:Start ä¹‹åã€‚
# UIåº”èƒ½æ­£ç¡®æ¸²æŸ“4ä¸ªç©å®¶ä½ç½®ã€‚
<command>
[Game:Start, data:{"game_type": "DouDiZhu_4Player", "players": ["{{user}}", "èµŒåœ£", "èµŒä¾ ", "èµŒç¥"], "initial_state": { "name": "AI Opponent", "play_style": "Unpredictable", "chips": 1000, "hand": [] }}]
[Game:SetupDeck, data:{"num_decks": 2, "jokers": 4}]
</command>


# --- æµ‹è¯• 1.3: ç¼ºå°‘ initial_state (å®¹é”™æµ‹è¯•) ---
# é¢„æœŸ: æ¸¸æˆåº”èƒ½æ­£å¸¸å¼€å§‹ï¼Œä½†æ•Œäººæ•°æ®å¯èƒ½ä¸ºç©ºæˆ–ä½¿ç”¨é»˜è®¤å€¼ã€‚æ§åˆ¶å°åº”æœ‰è­¦å‘Šã€‚
<command>
[Game:Start, data:{"game_type": "Blackjack", "players": ["{{user}}", "åº„å®¶"]}]
</command>


# ===============================================
# 2. å‘ç‰Œä¸å¡ç‰Œæ“ä½œ (Dealing & Card Manipulation)
# ===============================================

# --- æµ‹è¯• 2.1: æ ‡å‡†å‘ç‰Œ ---
# é¢„æœŸ: ä¸ºç©å®¶å‘2å¼ ç§æœ‰ç‰Œï¼Œä¸ºæ•Œäººå‘2å¼ éšè—ç‰Œï¼Œå‘å‡º3å¼ å…¬å…±ç‰Œã€‚
<command>
[Game:Function, type:å‘ç‰Œ, data:{"actions":[
  {"target":"player", "count":2, "visibility":"owner"},
  {"target":"enemy", "name":"æ‹¦è·¯åŠ«åŒª", "count":2, "visibility":"owner"},
  {"target":"board", "count":3, "visibility":"public"}
]}]
</command>


# --- æµ‹è¯• 2.2: å¤šäººå‘ç‰Œ (åŸºäºæµ‹è¯•1.2) ---
# é¢„æœŸ: ä¸ºæ‰€æœ‰4ä¸ªå‚ä¸è€…ï¼ˆ1ç©å®¶3æ•Œäººï¼‰æ¯äººå‘25å¼ ç‰Œã€‚
<command>
[Game:Function, type:å‘ç‰Œ, data:{"actions":[
    {"target":"player", "count":25, "visibility":"owner"},
    {"target":"enemy", "name":"èµŒåœ£", "count":25, "visibility":"owner"},
    {"target":"enemy", "name":"èµŒä¾ ", "count":25, "visibility":"owner"},
    {"target":"enemy", "name":"èµŒç¥", "count":25, "visibility":"owner"}
]}]
</command>


# --- æµ‹è¯• 2.3: ä¿®æ”¹å¡ç‰Œ (å…¬å¼€å¯¹æ‰‹æ‰‹ç‰Œ) ---
# é¢„æœŸ: å°†åä¸ºâ€œæ‹¦è·¯åŠ«åŒªâ€çš„å¯¹æ‰‹çš„æ‰€æœ‰æ‰‹ç‰Œéƒ½å˜ä¸ºå…¬å¼€å¯è§ã€‚
<command>
[Game:Function, type:Modify, data:{"targets":[{"location":"enemy_hand", "enemy_name":"æ‹¦è·¯åŠ«åŒª", "operation":"update", "card_filter":{"index":"all"}, "modifications":[{"field":"visibility", "operation":"set", "value":"public"}]}]}]
</command>


# --- æµ‹è¯• 2.4: ä¿®æ”¹å¡ç‰Œ (æ”¹å˜ç‚¹æ•°å’ŒèŠ±è‰²) ---
# é¢„æœŸ: å°†ç©å®¶æ‰‹ç‰Œä¸­çš„ç¬¬ä¸€å¼ ç‰Œå¼ºåˆ¶å˜ä¸ºçº¢æ¡ƒAã€‚
<command>
[Game:Function, type:Modify, data:{"targets":[{"location":"player_hand", "operation":"update", "card_filter":{"index":0}, "modifications":[{"field":"rank", "operation":"set", "value":"A"}, {"field":"suit", "operation":"set", "value":"â™¥"}]}]}]
</command>


# --- æµ‹è¯• 2.5: æ·»åŠ å¡ç‰Œ ---
# é¢„æœŸ: å‡­ç©ºå‘å…¬å…±ç‰ŒåŒºæ·»åŠ ä¸€å¼ é»‘æ¡ƒKã€‚
<command>
[Game:Function, type:Modify, data:{"targets":[{"location":"board", "operation":"add", "cards_to_add":[{"rank":"K", "suit":"â™ ", "visibility":"public"}]}]}]
</command>


# --- æµ‹è¯• 2.6: ç§»é™¤å¡ç‰Œ ---
# é¢„æœŸ: ä»å…¬å…±ç‰ŒåŒºç§»é™¤æ‰€æœ‰çº¢æ¡ƒ(â™¥)èŠ±è‰²çš„ç‰Œã€‚
<command>
[Game:Function, type:Modify, data:{"targets":[{"location":"board", "operation":"remove", "card_filter":{"suit":"â™¥", "index":"all"}}]}]
</command>

# --- æµ‹è¯• 2.7: äº¤æ¢å¡ç‰Œ (éšæœº) ---
# é¢„æœŸ: éšæœºäº¤æ¢ç©å®¶çš„ä¸€å¼ æ‰‹ç‰Œå’Œå¯¹æ‰‹çš„ä¸€å¼ æ‰‹ç‰Œã€‚
<command>
[Action:SwapCards, data:{"swap_type":"random", "source":{"location":"player_hand"}, "destination":{"location":"enemy_hand", "enemy_name":"æ‹¦è·¯åŠ«åŒª"}, "count":1}]
</command>


# ===============================================
# 3. æ¸¸æˆæµç¨‹æ§åˆ¶ (Game Flow Control)
# ===============================================

# --- æµ‹è¯• 3.1: å®Œæ•´è¡ŒåŠ¨åºåˆ— (ä¸‹æ³¨ -> æ‘Šç‰Œ) ---
# é¢„æœŸ: æ•Œäººä¸‹æ³¨100ï¼Œç„¶åæ‘Šç‰Œã€‚UIå’Œæ•°æ®åº”æ­£ç¡®åæ˜ ç­¹ç å˜åŒ–å’Œæ‰‹ç‰Œå…¬å¼€ã€‚
<command>
[Action:Bet, data:{"player_name":"æ‹¦è·¯åŠ«åŒª", "amount":100}]
[Action:Showdown, data:{"player_name":"æ‹¦è·¯åŠ«åŒª"}]
</command>


# --- æµ‹è¯• 3.2: æ¸¸æˆèƒœåˆ©ç»“ç®— ---
# é¢„æœŸ: å®£å‘Šç©å®¶èƒœåˆ©ï¼Œæ¸¸æˆç»“æŸï¼Œç©å®¶è·å¾—1000ç­¹ç å¥–åŠ±ã€‚UIè¿”å›åœ°å›¾/éš¾åº¦é€‰æ‹©ç•Œé¢ã€‚
<command>
[Game:End, data:{"result":"win", "reason":"ä½ çš„ç‰Œé¢æ›´å¤§ã€‚"}]
[Event:Modify, data:{"target":"{{user}}", "modifications":[ {"field":"chips", "operation":"add", "value":1000} ]}]
</command>


# --- æµ‹è¯• 3.3: æ¸¸æˆå¤±è´¥ç»“ç®— ---
# é¢„æœŸ: å®£å‘Šç©å®¶å¤±è´¥ï¼Œæ¸¸æˆç»“æŸï¼Œç©å®¶å¤±å»1ç‚¹ç”Ÿå‘½å€¼ã€‚
<command>
[Game:End, data:{"result":"lose", "reason":"å¯¹æ‰‹çš„ç‰Œé¢æ›´å¤§ã€‚"}]
</command>


# --- æµ‹è¯• 3.4: å‡»è´¥é¦–é¢† (å…³é”®æµ‹è¯•) ---
# é¢„æœŸ: å®£å‘Šç©å®¶æˆ˜èƒœé¦–é¢†ï¼Œæ¸¸æˆç»“æŸã€‚åœ°å›¾ç•Œé¢åº”å‡ºç°â€œå‰å¾€ä¸‹ä¸€å±‚â€æŒ‰é’®ã€‚
<command>
[Game:End, data:{"result":"boss_win", "reason":"ä½ å‡»è´¥äº†æœ¬å±‚é¦–é¢†ï¼"}]
</command>

# --- æµ‹è¯• 3.5: ç©å®¶æ­»äº¡ (å¼ºåˆ¶é‡ç½®) ---
# é¢„æœŸ: UIåº”æ˜¾ç¤ºæ­»äº¡ä¿¡æ¯ï¼Œå¹¶ç«‹å³è¿”å›åˆ°éš¾åº¦é€‰æ‹©ç•Œé¢ï¼Œæ— è®ºç©å®¶å½“å‰ç”Ÿå‘½å€¼å¤šå°‘ã€‚
<command>
[Game:End, data:{"result":"dead", "reason":"ä½ åœ¨é™·é˜±ä¸­è€—å°½äº†æ‰€æœ‰è¿æ°”ã€‚"}]
</command>


# ===============================================
# 4. å®ä½“çŠ¶æ€ä¿®æ”¹ (Entity State Modification)
# ===============================================

# --- æµ‹è¯• 4.1: å¤æ‚äº‹ä»¶ (å¢å‡ç›Š) ---
# é¢„æœŸ: ç©å®¶ç­¹ç å‡å°‘100ï¼Œç”Ÿå‘½å€¼å¢åŠ 1ï¼Œå¹¶è·å¾—ä¸€ä¸ªåä¸ºâ€œä¸“æ³¨â€çš„çŠ¶æ€æ•ˆæœã€‚
<command>
[Event:Modify, data:{"target":"{{user}}", "modifications":[
    {"field":"chips", "operation":"add", "value":-100},
    {"field":"health", "operation":"add", "value":1},
    {"field":"status_effects", "operation":"add", "value":{"icon":"ğŸ¯", "name":"ä¸“æ³¨", "description":"ä¸‹ä¸€æ¬¡è¡ŒåŠ¨ä¸ä¼šè¢«æ•Œäººçš„èƒ½åŠ›æ‰€å¹²æ‰°ã€‚", "duration":1}}
]}]
</command>


# --- æµ‹è¯• 4.2: è·å¾—é“å…· ---
# é¢„æœŸ: ç©å®¶è·å¾—ä¸€ä¸ªåä¸ºâ€œè€åƒçš„è¢–ç®­â€çš„ä¸»åŠ¨é“å…·ï¼Œå¹¶æ˜¾ç¤ºåœ¨é“å…·æ ã€‚
<command>
[Event:Modify, data:{"target":"{{user}}", "modifications":[
    {"field":"inventory", "operation":"add", "value":{"icon":"ğŸ²", "name":"è€åƒçš„è¢–ç®­", "description":"ä¸»åŠ¨ä½¿ç”¨ï¼šåœ¨æœ¬å›åˆä¸­ï¼Œä½ å¯ä»¥æŒ‡å®šä¸€å¼ å…¬å…±ç‰Œå°†å…¶ä½œåºŸã€‚", "type":"active"}}
]}]
</command>


# --- æµ‹è¯• 4.3: ç§»é™¤çŠ¶æ€æ•ˆæœ ---
# é¢„æœŸ: ç§»é™¤ç©å®¶èº«ä¸Šçš„â€œä¸“æ³¨â€çŠ¶æ€æ•ˆæœã€‚
<command>
[Event:Modify, data:{"target":"{{user}}", "modifications":[ {"field":"status_effects", "operation":"remove", "value":"ä¸“æ³¨"} ]}]
</command>


# ===============================================
# 5. UI ä¸å…¶ä»–æŒ‡ä»¤ (UI & Miscellaneous)
# ===============================================

# --- æµ‹è¯• 5.1: æ¸¸æˆæç¤º ---
# é¢„æœŸ: æ¸¸æˆç•Œé¢é¡¶éƒ¨å‡ºç°ä¸€ä¸ªæç¤ºæ°”æ³¡ï¼Œå†…å®¹ä¸ºæŒ‡å®šçš„æ–‡æœ¬ã€‚
<command>
[Game:Hint, data:{"text": "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æç¤ºï¼Œç”¨äºæŒ‡å¯¼ç©å®¶ã€‚å®ƒä¼šåœ¨æ¸¸æˆå¼€å§‹æˆ–ç»“æŸåæ¶ˆå¤±ã€‚"}]
</command>


# ===============================================
# 6. åœ°å›¾ä¿®æ”¹æŒ‡ä»¤ (Map Modification)
# ===============================================

# --- æµ‹è¯• 6.1: è¿œæœŸå¥–åŠ± (è—å®å›¾) ---
# é¢„æœŸ: åœ°å›¾ä¸Šä¸€ä¸ªæœªæ¥çš„ã€æœªè®¿é—®è¿‡çš„ã€è·¯å¾„ç¨€ç–çš„â€œæ•Œäººâ€èŠ‚ç‚¹ä¼šå˜ä¸ºâ€œå®ç®±â€èŠ‚ç‚¹ã€‚UIåº”å¼¹å‡ºâ€œè—å®å›¾â€æç¤ºã€‚
<command>
[Map:Modify, data:{
    "target_filter": {
        "type": "enemy",
        "scope": "future",
        "selection_priority": {"row": "random", "density": "sparsest"}
    },
    "modification": {"field": "type", "value": "treasure"},
    "effect_description": "è—å®å›¾ä¼¼ä¹æ ‡è®°å‡ºäº†ä¸€ä¸ªå®ç®±çš„ä½ç½®ï¼"
}]
</command>


# --- æµ‹è¯• 6.2: è¿‘æœŸå¨èƒ (ä¼å‡») ---
# é¢„æœŸ: ç©å®¶ä¸‹ä¸€æ­¥å¯è¾¾çš„è·¯å¾„ä¸­ï¼Œå¦‚æœæœ‰ä¸€ä¸ªâ€œä¼‘æ¯â€èŠ‚ç‚¹ï¼Œå®ƒä¼šå˜ä¸ºâ€œç²¾è‹±â€èŠ‚ç‚¹ã€‚UIåº”å¼¹å‡ºâ€œè¢«å æ®â€æç¤ºã€‚
<command>
[Map:Modify, data:{
    "target_filter": {
        "type": "rest",
        "scope": "reachable"
    },
    "modification": {"field": "type", "value": "elite"},
    "effect_description": "å‰æ–¹çš„ä¼‘æ¯ç‚¹ä¼¼ä¹è¢«ä¸€ä¸ªå¼ºå¤§çš„æ•Œäººå æ®äº†ï¼"
}]
</command>


# ===============================================
# 7. é”™è¯¯ä¸è¾¹ç¼˜æƒ…å†µæµ‹è¯• (Error & Edge Cases)
# ===============================================

# --- æµ‹è¯• 7.1: æ ¼å¼é”™è¯¯çš„JSON ---
# é¢„æœŸ: è§£æå™¨åº”ä¼˜é›…åœ°å¤±è´¥ï¼Œå¹¶åœ¨æ§åˆ¶å°æ‰“å°é”™è¯¯ã€‚æ¸¸æˆçŠ¶æ€ä¸åº”è¢«ç ´åã€‚
<command>
[Game:Start, data:{"game_type": "TexasHoldem", "players": ["{{user}}", "é”™è¯¯è§’è‰²"], "initial_state": { name: "é”™è¯¯è§’è‰²" }}]
</command>


# --- æµ‹è¯• 7.2: æ— æ•ˆæŒ‡ä»¤ç±»åˆ« ---
# é¢„æœŸ: è§£æå™¨åº”å¿½ç•¥æ­¤æŒ‡ä»¤ï¼Œå¹¶åœ¨æ§åˆ¶å°æ‰“å°è­¦å‘Šã€‚
<command>
[Invalid:Command, data:{"value":123}]
</command>


# --- æµ‹è¯• 7.3: åµŒå¥—JSONæŒ‡ä»¤ (å‹åŠ›æµ‹è¯•) ---
# é¢„æœŸ: è§£æå™¨åº”èƒ½æ­£ç¡®è§£æåŒ…å«å¤æ‚JSONçš„æŒ‡ä»¤ï¼Œä¾‹å¦‚åœ¨é“å…·ä¸­æ·»åŠ ä¸€ä¸ªåŒ…å«æ•°ç»„çš„å¯¹è±¡ã€‚
<command>
[Event:Modify, data:{"target":"{{user}}", "modifications":[
    {"field":"inventory", "operation":"add", "value":{
        "icon":"ğŸ“œ",
        "name":"å¤æ‚çš„å·è½´",
        "description":"ä¸€ä¸ªå¸¦æœ‰å¤æ‚æ•°æ®çš„é“å…·ã€‚",
        "type":"passive",
        "extra_data": {
            "effects": [
                {"type": "draw", "amount": 1},
                {"type": "damage", "value": 5, "targets": ["random_enemy"]}
            ],
            "is_cursed": false
        }
    }}
]}]
</command>